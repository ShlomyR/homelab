import{k as h,az as w,r as p,E as k,l as g,o as r,n as a,i as s,q as m,F as C,x as M,I as N,v as c,aB as B,z as u,y as _,L as F}from"./index-64HwxrMW.js";import{a as v}from"./index-Bw-gCGc_.js";import{V as I,a as S,b as z}from"./VCard-DCgaLy_I.js";import{V as P,a as $,b as E}from"./VHover-DQPH5chf.js";import{g as L,V as T}from"./VGrid-CSn7oW_U.js";import{V as q}from"./VBtn-C2X85IeN.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"badge year-badge"},D={class:"badge icon-badge"},H={key:0,class:"hover-overlay"},W={class:"badge rating-badge"},j=h({__name:"MovieSuggestions",setup(V){const d="http://localhost:3000",f=w(),n=p([]),l=p(null),b=async()=>{const o=await v.get(`${d}/suggest/movies`);n.value=o.data.map(e=>({...e,year:e.release_date?e.release_date.slice(0,4):"N/A",rating:e.vote_average?e.vote_average.toFixed(1):"8.0"}))},x=async o=>{try{l.value=o;const e=o.trim().toLowerCase().replace(/\s+/g,"+"),t=await v.get(`${d}/stream123`,{params:{title:e}}),{videoFrame:i}=t.data;i?f.push({path:"/watchPage",query:{title:o,videoFrame:i}}):alert("No stream found 😢")}catch(e){console.error("Error fetching stream:",e),alert("Failed to fetch streaming link 😢")}finally{l.value=null}};return k(b),(o,e)=>(r(),g(I,{class:"pa-5"},{default:a(()=>[s(P,{dense:""},{default:a(()=>[(r(!0),m(C,null,M(n.value,t=>(r(),g($,{key:t.id,cols:"12",sm:"6",md:"3"},{default:a(()=>[s(E,null,{default:a(({isHovering:i,props:y})=>[s(S,N({ref_for:!0},y,{class:"mb-5 movie-card",elevation:"6",rounded:"xl",color:"white"}),{default:a(()=>[s(L,{src:t.poster,height:"300px",class:"rounded-t-xl",cover:""},{default:a(()=>[c("div",R,u(t.year||"2023"),1),c("div",D,[s(T,{size:"18"},{default:a(()=>e[0]||(e[0]=[_("mdi-television")])),_:1})]),i?(r(),m("div",H,[s(q,{color:"cyan darken-2",size:"small",rounded:"pill",loading:l.value===t.title,disabled:l.value===t.title,onClick:F(J=>x(t.title),["stop"])},{default:a(()=>e[1]||(e[1]=[_(" 🎬 Watch Now ")])),_:2},1032,["loading","disabled","onClick"])])):B("",!0),c("div",W," ⭐ "+u(t.rating||"8.0"),1)]),_:2},1032,["src"]),s(z,{class:"text-center text-body-1 font-weight-bold"},{default:a(()=>[_(u(t.title),1)]),_:2},1024)]),_:2},1040)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}}),G=A(j,[["__scopeId","data-v-b7dbb8ff"]]),ee=h({__name:"MovieSuggestionsPage",setup(V){return(d,f)=>{const n=G;return r(),g(n)}}});export{ee as default};
