import{k as v,az as b,r as p,E as w,l as _,o as n,n as a,i as s,q as f,F as k,x as C,I as M,v as d,aB as N,z as c,y as u,L as B}from"./index-DTCam3wX.js";import{a as m}from"./index-Bw-gCGc_.js";import{V as F,a as S,b as z}from"./VCard-z8XZYkkZ.js";import{V as I,a as E,b as L}from"./VHover-BMr1D_xA.js";import{g as P,V as T}from"./VGrid-bCwdb60U.js";import{V as q}from"./VBtn-CGPXk0An.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"badge year-badge"},A={class:"badge icon-badge"},D={key:0,class:"hover-overlay"},H={class:"badge rating-badge"},W=v({__name:"MovieSuggestions",setup(h){const g=b(),i=p([]),o=p(null),V=async()=>{const r=await m.get("http://localhost:3000/suggest/movies");i.value=r.data.map(e=>({...e,year:e.release_date?e.release_date.slice(0,4):"N/A",rating:e.vote_average?e.vote_average.toFixed(1):"8.0"}))},x=async r=>{try{o.value=r;const e=r.trim().toLowerCase().replace(/\s+/g,"+"),t=await m.get("http://localhost:3000/stream123",{params:{title:e}}),{videoFrame:l}=t.data;l?g.push({path:"/watchPage",query:{title:r,videoFrame:l}}):alert("No stream found 😢")}catch(e){console.error("Error fetching stream:",e),alert("Failed to fetch streaming link 😢")}finally{o.value=null}};return w(V),(r,e)=>(n(),_(F,{class:"pa-5"},{default:a(()=>[s(I,{dense:""},{default:a(()=>[(n(!0),f(k,null,C(i.value,t=>(n(),_(E,{key:t.id,cols:"12",sm:"6",md:"3"},{default:a(()=>[s(L,null,{default:a(({isHovering:l,props:y})=>[s(S,M({ref_for:!0},y,{class:"mb-5 movie-card",elevation:"6",rounded:"xl",color:"white"}),{default:a(()=>[s(P,{src:t.poster,height:"300px",class:"rounded-t-xl",cover:""},{default:a(()=>[d("div",$,c(t.year||"2023"),1),d("div",A,[s(T,{size:"18"},{default:a(()=>e[0]||(e[0]=[u("mdi-television")])),_:1})]),l?(n(),f("div",D,[s(q,{color:"cyan darken-2",size:"small",rounded:"pill",loading:o.value===t.title,disabled:o.value===t.title,onClick:B(G=>x(t.title),["stop"])},{default:a(()=>e[1]||(e[1]=[u(" 🎬 Watch Now ")])),_:2},1032,["loading","disabled","onClick"])])):N("",!0),d("div",H," ⭐ "+c(t.rating||"8.0"),1)]),_:2},1032,["src"]),s(z,{class:"text-center text-body-1 font-weight-bold"},{default:a(()=>[u(c(t.title),1)]),_:2},1024)]),_:2},1040)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}}),j=R(W,[["__scopeId","data-v-4375fc6a"]]),Z=v({__name:"MovieSuggestionsPage",setup(h){return(g,i)=>{const o=j;return n(),_(o)}}});export{Z as default};
